(()=>{"use strict";var i={791:function(i,t,e){var o=e(848),n=e(540),s=e(338);let r=i=>(0,o.jsx)("line",{x1:i.position,y1:"0",x2:i.position,y2:i.height,stroke:"#d9d9d9",strokeWidth:i.year%100?"1":"3",strokeDasharray:i.year%100?"4":""}),a=i=>(0,o.jsxs)("g",{children:[(0,o.jsx)("rect",{x:"0%",y:"0%",width:i.padSize.x,height:i.padSize.y,onClick:i.stateResetHandler,onMouseMove:i.stateResetHandler,style:{fill:"white",stroke:"none",strokeWidth:"0",fillOpacity:"0",strokeOpacity:"0"}}),i.yearsOnScale.filter(i.isVisible).map((t,e)=>(0,o.jsx)(r,{year:t,height:i.padSize.y,position:i.positionByYear(t)},"yearLine"+t+e))]}),l=i=>(0,o.jsxs)("g",{children:[(0,o.jsx)("rect",{x:i.position-i.yearLabelWidth/2,y:"0",rx:"5",ry:"5",width:i.yearLabelWidth,height:"40",fill:i.year%100?"#cacacaff":"#a4a4a4ff"}),(0,o.jsx)("text",{x:i.position,y:"8",width:i.yearLabelWidth,dominantBaseline:"hanging",textAnchor:"middle",height:"40",fontSize:"15",fill:i.year%100?"#6b6b6bff":"white",className:"font-mono",children:i.year})]}),h=i=>(0,o.jsx)("div",{className:"scaleContainer",children:(0,o.jsx)("div",{className:"scale",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${i.padSize.x} 60`,preserveAspectRatio:"xMidYMid meet",style:{width:i.padSize.x,height:60},children:i.yearsOnScale.filter(i.isVisible).map((t,e)=>(0,o.jsx)(l,{year:t,position:i.positionByYear(t),yearLabelWidth:i.yearLabelWidth},"yearLabel"+t+e))})})});function d(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}let p=class{constructor(i,t,e,o){d(this,"id",void 0),d(this,"title",void 0),d(this,"publicationDate",void 0),d(this,"authorId",void 0),this.id=i,this.title=t,this.publicationDate=e,this.authorId=o}},u=class{constructor(i,t,e,o,n){d(this,"id",void 0),d(this,"name",void 0),d(this,"born",void 0),d(this,"died",void 0),d(this,"rowNumber",void 0),this.id=i,this.name=t,this.born=e,this.died=o,this.rowNumber=n}},g=[new u("1","Pan Testowy z baaaadzo długim nazwiskiem",1820,1901,1),new u("2","Drugi Pan..",1831,1888,2),new u("3","Czeci Pan",1810,1848,3),new u("5","Pan R\xf3wnoległy :)",1850,1888,3),new u("4","Czarta Pani",1820,1901,4)].sort((i,t)=>i.born-t.born),c=[new p("1","Pierwszy tytuł",1840,"1"),new p("2","Drugi",1842,"1"),new p("3","Książka jakaś",1849,"1"),new p("4","Książka jakaś",1849,"2"),new p("5","Traktat",1874,"2"),new p("6","Esej",1821,"3"),new p("7","Rozprawka",1855,"4"),new p("8","Publikacja o bardzo długim, zawiłym i wielomodułowym tytule. Pierwsza kreww.",1883,"5")].sort((i,t)=>i.publicationDate-t.publicationDate),w=new Map;c.forEach(i=>{w.set(i.id,g.find(t=>i.authorId==t.id))});let x=()=>c,y=i=>c.find(t=>t.id==i),b=i=>w.get(i.id),f=["#2CAA58","#381A47","#321E94","#8C3226","#678A51","#47D7A1","#E78140","#321706","#1B5383","#2F0427","#55BAD8"],m=i=>f[Math.floor(i.split("").map(i=>i.charCodeAt(0)).reduce((i,t)=>Math.min(t,1e3)+i)%1e3/1e3*f.length)],S=i=>{let t=m(i.author.name),e=i.publication.title.split(" ").map(i=>[i]).reduce((t,e)=>{let o=t[t.length-1]+" "+e[0];return o.length<i.settings.maxLettersColumns?[...t.slice(0,-1),o]:[...t,e[0]]}),n=e.slice(0,i.settings.maxLettersRows);return(0,o.jsxs)("g",{children:[(0,o.jsxs)("g",{className:"tooltip",children:[(0,o.jsx)("rect",{x:i.position-100,y:i.rowPosition+i.settings.boxSize/2,rx:"3",ry:"3",width:"220",height:60+10*(n.length-1),style:{fill:"white",stroke:t,strokeWidth:"2px",fillOpacity:"0.7",strokeOpacity:"1"}}),(0,o.jsx)("text",{x:i.position-100,y:i.rowPosition+i.settings.boxSize/2+20,width:"200",dominantBaseline:"hanging",textAnchor:"start",height:60+10*(n.length-1),fontSize:"14",className:" font-sans font-bold ",fill:t,dy:"10",children:n.map((t,s)=>(0,o.jsxs)("tspan",{x:i.position-90,dy:"0.8em",children:[t," ",s==n.length-1&&n.length!=e.length?"...":""," "]},"pubTitle"+i.publication.id+s))})]}),(0,o.jsx)("circle",{cx:i.position,cy:i.rowPosition+i.settings.boxSize/2,r:i.settings.dotSize,onMouseMove:()=>i.updateHighlightedPublication(i.publication.id),onClick:()=>i.updateHighlightedPublication(i.publication.id),style:{fill:"white",stroke:t,strokeWidth:"4",fillOpacity:"1",strokeOpacity:"1"},className:"tooltipHover cursor-pointer flex h-10 w-10 items-center justify-center rounded-lg hover:bg-blue-50 hover:text-blue-600 transition-colors duration-300"})]})},z=i=>x().filter(t=>i.isVisible(t.publicationDate)).map((i,t)=>({publication:i,author:b(i)})).map((t,e)=>{let{publication:n,author:s}=t;if(s)return(0,o.jsx)(S,{publication:n,author:s,position:i.positionByYear(n.publicationDate),settings:i.publicationNodeSettings,rowPosition:i.rowPosition(s.rowNumber),updateHighlightedPublication:i.updateHighlightedPublication},"publication"+n.id+e)});class v{constructor(i,t){d(this,"x",void 0),d(this,"y",void 0),this.x=i,this.y=t}}let P=i=>{let t=m(i.person.name);return(0,o.jsxs)("g",{children:[(0,o.jsx)("rect",{x:i.positionStart,y:i.rowPosition,rx:"5",ry:"5",width:i.positionEnd-i.positionStart,height:i.settings.boxSize,style:{fill:t,stroke:t,strokeWidth:"0",fillOpacity:"0.1",strokeOpacity:"1"}}),(0,o.jsx)("line",{x1:i.positionStart+i.settings.boxSize,y1:i.rowPosition+i.settings.boxSize/2,x2:i.positionEnd,y2:i.rowPosition+i.settings.boxSize/2,stroke:t,strokeWidth:"4"}),(0,o.jsx)("rect",{x:i.positionStart,y:i.rowPosition,rx:"10",ry:"10",width:i.settings.boxSize,height:i.settings.boxSize,style:{fill:t,stroke:t,strokeWidth:"2",fillOpacity:"0.1",strokeOpacity:"1"},className:"cursor-pointer",onMouseMove:()=>i.updateHighlightedAuthor(i.person.id),onClick:()=>i.updateHighlightedAuthor(i.person.id)}),(0,o.jsx)("rect",{x:i.positionStart-1,y:i.rowPosition+i.settings.boxSize-15,rx:"5",ry:"5",width:10*i.person.name.length,height:22,style:{fill:t,stroke:t,strokeWidth:"0",fillOpacity:"1",strokeOpacity:"0"},className:"cursor-pointer"}),(0,o.jsx)("text",{x:i.positionStart+5,y:i.rowPosition+i.settings.boxSize-10,width:10*i.person.name.length,dominantBaseline:"hanging",textAnchor:"start",height:"30",fontSize:"14",fill:"white",className:"cursor-pointer font-mono",children:i.person.name})]})},j=i=>g.filter(t=>i.isVisibleRange(t.born,t.died)).map((t,e)=>(0,o.jsx)(P,{person:t,positionStart:i.positionByYear(t.born),positionEnd:i.positionByYear(t.died),settings:i.personNodesSettings,rowPosition:i.rowPosition(t.rowNumber),updateHighlightedAuthor:i.updateHighlightedAuthor},"person"+t.id+e)),k=class{constructor(i,t,e,o){d(this,"id",void 0),d(this,"name",void 0),d(this,"from",void 0),d(this,"to",void 0),this.id=i,this.name=t,this.from=e,this.to=o}},M=[new k("0","***",y("6"),y("1")),new k("1","***",y("6"),y("1")),new k("2","***",y("1"),y("8")),new k("3","***",y("1"),y("5")),new k("4","***",y("2"),y("5")),new k("5","***",y("3"),y("5")),new k("6","***",y("7"),y("5")),new k("7","***",y("2"),y("7")),new k("8","***",y("3"),y("4")),new k("9","***",y("3"),y("4")),new k("10","***",y("7"),y("8")),new k("11","***",y("5"),y("8")),new k("12","***",y("6"),y("8"))].sort((i,t)=>i.from&&t.from?i.from.publicationDate-t.from.publicationDate:0),D=i=>{if(i.publicationReference.from&&i.publicationReference.to){let t=2*i.settings.boxSize,e=Math.min(i.positionStart,i.positionEnd),n=Math.max(i.positionStart,i.positionEnd),s=n-e<t?(n-e)%t/t:1,r=new v(i.positionStart,i.rowPositionFrom+i.settings.boxSize/2),a=new v(i.positionEnd,i.rowPositionTo+i.settings.boxSize/2),l=r.y>a.y?-1:1,h=r.y==a.y?-1:1,d=r.x>a.x?-1:1,p=.7+.7*((i.publicationReference.to.publicationDate+i.publicationReference.from.publicationDate)%15)/15,u=1.4+.7*((i.publicationReference.to.publicationDate+i.publicationReference.from.publicationDate)%5)/5,g=[];i.positionEnd==i.positionStart?(g.push(new v(r.x,r.y)),g.push(new v(a.x+.1,a.y+.1))):(g.push(new v(r.x+.877*i.settings.dotSize*d*s,r.y+.877*i.settings.dotSize*l*h)),g.push(new v(r.x+.877*i.settings.boxSize*d*s,r.y+i.settings.boxSize*p*l*h)),g.push(new v(r.x+(i.settings.boxSize+i.settings.boxSize*p*d)*s,r.y+i.settings.boxSize*p*l*h)),g.push(new v(r.x+(i.settings.boxSize+i.settings.boxSize*p*d)*s,a.y-i.settings.boxSize*u*l)),g.push(new v(a.x,a.y-i.settings.boxSize*u*l)),g.push(new v(a.x,a.y-i.settings.dotSize*l)));let c=[["M",g[0].x,g[0].y],...g.map(i=>["L",i.x,i.y])].map(i=>i.join(" ")).join(" "),w=m(i.authorFrom.name);return(0,o.jsx)("path",{d:function(i,t,e){function o(i,t,e){var o=t.x-i.x,s=t.y-i.y;return n(i,t,Math.min(1,e/Math.sqrt(o*o+s*s)))}function n(i,t,e){return{x:i.x+(t.x-i.x)*e,y:i.y+(t.y-i.y)*e}}function s(i,t){i.length>2&&(i[i.length-2]=t.x,i[i.length-1]=t.y)}function r(i){return{x:parseFloat(i[i.length-2]),y:parseFloat(i[i.length-1])}}var a=i.split(/[,\s]/).reduce(function(i,t){var e=t.match("([a-zA-Z])(.+)");return e?(i.push(e[1]),i.push(e[2])):i.push(t),i},[]).reduce(function(i,t){return parseFloat(t)==t&&i.length?i[i.length-1].push(t):i.push([t]),i},[]),l=[];if(a.length>1){var h=r(a[0]),d=null;"Z"==a[a.length-1][0]&&a[0].length>2&&(d=["L",h.x,h.y],a[a.length-1]=d),l.push(a[0]);for(var p=1;p<a.length;p++){var u=l[l.length-1],g=a[p],c=g==d?a[1]:a[p+1];if(c&&u&&u.length>2&&"L"==g[0]&&c.length>2&&"L"==c[0]){var w,x,y=r(u),b=r(g),f=r(c);e?(w=n(b,u.origPoint||y,5),x=n(b,c.origPoint||f,5)):(w=o(b,y,t),x=o(b,f,t)),s(g,w),g.origPoint=b,l.push(g);var m=n(w,b,.5),S=n(b,x,.5),z=["C",m.x,m.y,S.x,S.y,x.x,x.y];z.origPoint=b,l.push(z)}else l.push(g)}if(d){var v=r(l[l.length-1]);l.push(["Z"]),s(l[0],v)}}else l=a;return l.reduce(function(i,t){return i+t.join(" ")+" "},"")}(c,5,!1),stroke:w,strokeWidth:"2",fill:"none",className:"opacity-70 "+(i.isHighlighted?"animated-dash":"")})}},O=i=>M.map((t,e)=>{var n,s,r,a;if(t.from&&t.to&&i.isVisibleRange(Math.min(null==(n=t.from)?void 0:n.publicationDate,null==(s=t.to)?void 0:s.publicationDate),Math.max(null==(r=t.from)?void 0:r.publicationDate,null==(a=t.to)?void 0:a.publicationDate))){let n=b(t.from),s=b(t.to);if(n&&s)return(0,o.jsx)(D,{publicationReference:t,settings:i.publicationReferenceSettings,authorFrom:n,authorTo:s,positionStart:i.positionByYear(t.from.publicationDate),positionEnd:i.positionByYear(t.to.publicationDate),rowPositionFrom:i.rowPosition(n.rowNumber),rowPositionTo:i.rowPosition(s.rowNumber),isHighlighted:i.highlightedAuthor==n.id||i.highlightedAuthor==s.id||i.highlightedPublication==t.from.id||i.highlightedPublication==t.to.id},"pubref"+t.id+e)}}),Y=()=>{let i=function(){let i="undefined"!=typeof window,t=()=>({width:i?window.innerWidth:0,height:i?window.innerHeight:0}),[e,o]=(0,n.useState)(t());return(0,n.useEffect)(()=>{if(i){function e(){o(t())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[i]),e}(),t={windowSize:{x:i.width,y:i.height},yearLabelWidth:100,rowHeight:165},[e,s]=n.useState(22),[r,l]=n.useState(0),[d,p]=n.useState({isDragged:!1,startViewPosition:{x:0,y:0},startDragPosition:{x:0,y:0}}),[u,g]=n.useState("0"),[c,w]=n.useState("0"),[x,y]=n.useState({x:1809,y:0}),[b,f]=n.useState({from:-1200,to:2025,stepSize:10}),m=[...Array(Math.ceil((b.to-b.from)/b.stepSize))].map((i,t)=>b.from+t*b.stepSize),S=i=>(i-x.x)*e,P=i=>S(i)+t.rowHeight>0&&S(i)-t.rowHeight<t.windowSize.x,k=(i,e)=>S(e)+t.rowHeight>0&&S(i)-t.rowHeight<t.windowSize.x,M=i=>t.rowHeight*i+x.y,D=(i,t,e)=>{0==i&&p({isDragged:!0,startViewPosition:x,startDragPosition:{x:t,y:e}})},Y=()=>p(i=>({...i,isDragged:!1})),H=(i,o)=>{d.isDragged&&y({x:Math.min(Math.max(d.startViewPosition.x-(i-d.startDragPosition.x)/e,b.from-t.yearLabelWidth),b.to+t.yearLabelWidth),y:d.startViewPosition.y+(o-d.startDragPosition.y)})},R=(i,t,e,o)=>Math.sqrt(Math.pow(i-e,2)+Math.pow(t-o,2));return(0,o.jsxs)("div",{style:{backgroundColor:"#f3f3f3",width:t.windowSize.x,height:t.windowSize.y,overflow:"hidden"},onMouseDown:i=>D(i.button,i.pageX,i.pageY),onTouchStart:i=>(i=>{switch(i.length){case 1:D(0,i[0].pageX,i[0].pageY);break;case 2:D(0,i[0].pageX,i[0].pageY),l(R(i[0].pageX,i[0].pageY,i[1].pageX,i[1].pageY))}})(i.touches),onMouseUp:i=>Y(),onTouchEnd:i=>Y(),onMouseMove:i=>H(i.pageX,i.pageY),onTouchMove:i=>(i=>{switch(i.length){case 1:H(i[0].pageX,i[0].pageY);break;case 2:let t=R(i[0].pageX,i[0].pageY,i[1].pageX,i[1].pageY);s(e-(r-t)/100),l(t),e<=10?f(i=>({...i,stepSize:100})):e<=20?f(i=>({...i,stepSize:10})):f(i=>({...i,stepSize:5})),Y()}})(i.touches),onWheel:i=>{var t;11>=Math.max(1,e-(t=i.deltaY)/100)?(f(i=>({...i,stepSize:100})),s(Math.max(1,e-t/100))):e-t/200<=22?(f(i=>({...i,stepSize:10})),s(e-t/200)):(f(i=>({...i,stepSize:5})),s(e-t/300)),y({x:x.x-t/100,y:x.y})},children:[(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${t.windowSize.x} ${t.windowSize.y}`,preserveAspectRatio:"xMidYMid meet",style:{width:t.windowSize.x,height:t.windowSize.y},children:[(0,o.jsx)(a,{padSize:new v(t.windowSize.x,t.windowSize.y),isVisible:P,positionByYear:S,stateResetHandler:()=>{w("0"),g("0")},yearsOnScale:m}),(0,o.jsx)(j,{isVisibleRange:k,personNodesSettings:{boxSize:50},positionByYear:S,rowPosition:M,updateHighlightedAuthor:g}),(0,o.jsx)(O,{highlightedAuthor:u,highlightedPublication:c,isVisibleRange:k,positionByYear:S,publicationReferenceSettings:{dotSize:15,boxSize:50},rowPosition:M}),(0,o.jsx)(z,{isVisible:P,positionByYear:S,publicationNodeSettings:{dotSize:15,boxSize:50,maxLettersColumns:25,maxLettersRows:3},rowPosition:M,updateHighlightedPublication:w})]}),(0,o.jsx)(h,{padSize:new v(t.windowSize.x,t.windowSize.y),isVisible:P,positionByYear:S,yearLabelWidth:t.yearLabelWidth,yearsOnScale:m})]})},H=document.getElementById("root");H&&s.createRoot(H).render((0,o.jsx)(n.StrictMode,{children:(0,o.jsx)(()=>(0,o.jsx)(Y,{}),{})}))}},t={};function e(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return i[o](s,s.exports,e),s.exports}e.m=i,e.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),(()=>{var i=[];e.O=(t,o,n,s)=>{if(o){s=s||0;for(var r=i.length;r>0&&i[r-1][2]>s;r--)i[r]=i[r-1];i[r]=[o,n,s];return}for(var a=1/0,r=0;r<i.length;r++){for(var[o,n,s]=i[r],l=!0,h=0;h<o.length;h++)(!1&s||a>=s)&&Object.keys(e.O).every(i=>e.O[i](o[h]))?o.splice(h--,1):(l=!1,s<a&&(a=s));if(l){i.splice(r--,1);var d=n();void 0!==d&&(t=d)}}return t}})(),(()=>{var i={410:0};e.O.j=t=>0===i[t];var t=(t,o)=>{var n,s,[r,a,l]=o,h=0;if(r.some(t=>0!==i[t])){for(n in a)e.o(a,n)&&(e.m[n]=a[n]);if(l)var d=l(e)}for(t&&t(o);h<r.length;h++)s=r[h],e.o(i,s)&&i[s]&&i[s][0](),i[s]=0;return e.O(d)},o=self.webpackChunkchronology_presenter=self.webpackChunkchronology_presenter||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=e.O(void 0,["783"],function(){return e(791)});o=e.O(o)})();