(()=>{"use strict";var e={586:function(e,t,i){var o=i(848),s=i(540),n=i(338);let r=e=>(0,o.jsx)("line",{x1:e.position,y1:"0",x2:e.position,y2:e.height,stroke:"#d9d9d9",strokeWidth:e.year%100?"1":"3",strokeDasharray:e.year%100?"4":""}),a=e=>(0,o.jsxs)("g",{children:[(0,o.jsx)("rect",{x:"0%",y:"0%",width:e.padSize.x,height:e.padSize.y,onClick:e.stateResetHandler,onMouseMove:e.stateResetHandler,style:{fill:"white",stroke:"none",strokeWidth:"0",fillOpacity:"0",strokeOpacity:"0"}}),e.yearsOnScale.filter(e.isVisible).map((t,i)=>(0,o.jsx)(r,{year:t,height:e.padSize.y,position:e.positionByYear(t)},"yearLine"+t+i))]}),l=e=>(0,o.jsxs)("g",{children:[(0,o.jsx)("rect",{x:e.position-e.yearLabelWidth/2,y:"0",rx:"5",ry:"5",width:e.yearLabelWidth,height:"40",fill:e.year%100?"#cacacaff":"#a4a4a4ff"}),(0,o.jsx)("text",{x:e.position,y:"8",width:e.yearLabelWidth,dominantBaseline:"hanging",textAnchor:"middle",height:"40",fontSize:"15",fill:e.year%100?"#6b6b6bff":"white",className:"font-mono",children:e.year})]}),h=e=>(0,o.jsx)("div",{className:"scaleContainer",children:(0,o.jsx)("div",{className:"scale",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${e.padSize.x} 60`,preserveAspectRatio:"xMidYMid meet",style:{width:e.padSize.x,height:60},children:e.yearsOnScale.filter(e.isVisible).map((t,i)=>(0,o.jsx)(l,{year:t,position:e.positionByYear(t),yearLabelWidth:e.yearLabelWidth},"yearLabel"+t+i))})})});function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let p=class{constructor(e,t,i,o){d(this,"id",void 0),d(this,"title",void 0),d(this,"publicationDate",void 0),d(this,"authorId",void 0),this.id=e,this.title=t,this.publicationDate=i,this.authorId=o}},u=class{constructor(e,t,i,o,s){d(this,"id",void 0),d(this,"name",void 0),d(this,"born",void 0),d(this,"died",void 0),d(this,"rowNumber",void 0),this.id=e,this.name=t,this.born=i,this.died=o,this.rowNumber=s}},c=[new u("1","Pan Testowy z baaaadzo długim nazwiskiem",1820,1901,1),new u("2","Drugi Pan..",1831,1888,2),new u("3","Czeci Pan",1810,1848,3),new u("5","Pan R\xf3wnoległy :)",1850,1888,3),new u("4","Czarta Pani",1820,1901,4)].sort((e,t)=>e.born-t.born),g=[new p("1","Pierwszy tytuł",1840,"1"),new p("2","Drugi",1842,"1"),new p("3","Książka jakaś",1849,"1"),new p("4","Książka jakaś",1849,"2"),new p("5","Traktat",1874,"2"),new p("6","Esej",1821,"3"),new p("7","Rozprawka",1855,"4"),new p("8","Publikacja o bardzo długim, zawiłym i wielomodułowym tytule. Pierwsza kreww.",1883,"5")].sort((e,t)=>e.publicationDate-t.publicationDate),x=new Map;g.forEach(e=>{x.set(e.id,c.find(t=>e.authorId==t.id))});let y=()=>g,w=e=>g.find(t=>t.id==e),b=e=>x.get(e.id),f=["#2CAA58","#381A47","#321E94","#8C3226","#678A51","#47D7A1","#E78140","#321706","#1B5383","#2F0427","#55BAD8"],m=e=>f[Math.floor(e.split("").map(e=>e.charCodeAt(0)).reduce((e,t)=>Math.min(t,1e3)+e)%1e3/1e3*f.length)],S=e=>{let t=m(e.author.name),i=e.publication.title.split(" ").map(e=>[e]).reduce((t,i)=>{let o=t[t.length-1]+" "+i[0];return o.length<e.settings.maxLettersColumns?[...t.slice(0,-1),o]:[...t,i[0]]}),s=i.slice(0,e.settings.maxLettersRows);return(0,o.jsxs)("g",{children:[(0,o.jsxs)("g",{className:"tooltip",children:[(0,o.jsx)("rect",{x:e.position-100,y:e.rowPosition+e.settings.boxSize/2,rx:"3",ry:"3",width:"220",height:60+10*(s.length-1),style:{fill:"white",stroke:t,strokeWidth:"2px",fillOpacity:"0.7",strokeOpacity:"1"}}),(0,o.jsx)("text",{x:e.position-100,y:e.rowPosition+e.settings.boxSize/2+20,width:"200",dominantBaseline:"hanging",textAnchor:"start",height:60+10*(s.length-1),fontSize:"14",className:" font-sans font-bold ",fill:t,dy:"10",children:s.map((t,n)=>(0,o.jsxs)("tspan",{x:e.position-90,dy:"0.8em",children:[t," ",n==s.length-1&&s.length!=i.length?"...":""," "]},"pubTitle"+e.publication.id+n))})]}),(0,o.jsx)("circle",{cx:e.position,cy:e.rowPosition+e.settings.boxSize/2,r:e.settings.dotSize,onMouseMove:()=>e.updateHighlightedPublication(e.publication.id),onClick:()=>e.updateHighlightedPublication(e.publication.id),style:{fill:"white",stroke:t,strokeWidth:"4",fillOpacity:"1",strokeOpacity:"1"},className:"tooltipHover cursor-pointer flex h-10 w-10 items-center justify-center rounded-lg hover:bg-blue-50 hover:text-blue-600 transition-colors duration-300"})]})},v=e=>y().filter(t=>e.isVisible(t.publicationDate)).map((e,t)=>({publication:e,author:b(e)})).map((t,i)=>{let{publication:s,author:n}=t;if(n)return(0,o.jsx)(S,{publication:s,author:n,position:e.positionByYear(s.publicationDate),settings:e.publicationNodeSettings,rowPosition:e.rowPosition(n.rowNumber),updateHighlightedPublication:e.updateHighlightedPublication},"publication"+s.id+i)});class z{constructor(e,t){d(this,"x",void 0),d(this,"y",void 0),this.x=e,this.y=t}}let j=e=>{let t=m(e.person.name);return(0,o.jsxs)("g",{children:[(0,o.jsx)("rect",{x:e.positionStart,y:e.rowPosition,rx:"5",ry:"5",width:e.positionEnd-e.positionStart,height:e.settings.boxSize,style:{fill:t,stroke:t,strokeWidth:"0",fillOpacity:"0.1",strokeOpacity:"1"}}),(0,o.jsx)("line",{x1:e.positionStart+e.settings.boxSize,y1:e.rowPosition+e.settings.boxSize/2,x2:e.positionEnd,y2:e.rowPosition+e.settings.boxSize/2,stroke:t,strokeWidth:"4"}),(0,o.jsx)("rect",{x:e.positionStart,y:e.rowPosition,rx:"10",ry:"10",width:e.settings.boxSize,height:e.settings.boxSize,style:{fill:t,stroke:t,strokeWidth:"2",fillOpacity:"0.1",strokeOpacity:"1"},className:"cursor-pointer",onMouseMove:()=>e.updateHighlightedAuthor(e.person.id),onClick:()=>e.updateHighlightedAuthor(e.person.id)}),(0,o.jsx)("rect",{x:e.positionStart-1,y:e.rowPosition+e.settings.boxSize-15,rx:"5",ry:"5",width:10*e.person.name.length,height:22,style:{fill:t,stroke:t,strokeWidth:"0",fillOpacity:"1",strokeOpacity:"0"},className:"cursor-pointer"}),(0,o.jsx)("text",{x:e.positionStart+5,y:e.rowPosition+e.settings.boxSize-10,width:10*e.person.name.length,dominantBaseline:"hanging",textAnchor:"start",height:"30",fontSize:"14",fill:"white",className:"cursor-pointer font-mono",children:e.person.name})]})},P=e=>c.filter(t=>e.isVisibleRange(t.born,t.died)).map((t,i)=>(0,o.jsx)(j,{person:t,positionStart:e.positionByYear(t.born),positionEnd:e.positionByYear(t.died),settings:e.personNodesSettings,rowPosition:e.rowPosition(t.rowNumber),updateHighlightedAuthor:e.updateHighlightedAuthor},"person"+t.id+i)),k=class{constructor(e,t,i,o){d(this,"id",void 0),d(this,"name",void 0),d(this,"from",void 0),d(this,"to",void 0),this.id=e,this.name=t,this.from=i,this.to=o}},M=[new k("0","***",w("6"),w("1")),new k("1","***",w("6"),w("1")),new k("2","***",w("1"),w("8")),new k("3","***",w("1"),w("5")),new k("4","***",w("2"),w("5")),new k("5","***",w("3"),w("5")),new k("6","***",w("7"),w("5")),new k("7","***",w("2"),w("7")),new k("8","***",w("3"),w("4")),new k("9","***",w("3"),w("4")),new k("10","***",w("7"),w("8")),new k("11","***",w("5"),w("8")),new k("12","***",w("6"),w("8"))].sort((e,t)=>e.from&&t.from?e.from.publicationDate-t.from.publicationDate:0),D=e=>{if(e.publicationReference.from&&e.publicationReference.to){let t=2*e.settings.boxSize,i=Math.min(e.positionStart,e.positionEnd),s=Math.max(e.positionStart,e.positionEnd),n=s-i<t?(s-i)%t/t:1,r=new z(e.positionStart,e.rowPositionFrom+e.settings.boxSize/2),a=new z(e.positionEnd,e.rowPositionTo+e.settings.boxSize/2),l=r.y>a.y?-1:1,h=r.y==a.y?-1:1,d=r.x>a.x?-1:1,p=.7+.7*((e.publicationReference.to.publicationDate+e.publicationReference.from.publicationDate)%15)/15,u=1.4+.7*((e.publicationReference.to.publicationDate+e.publicationReference.from.publicationDate)%5)/5,c=[];e.positionEnd==e.positionStart?(c.push(new z(r.x,r.y)),c.push(new z(a.x+.1,a.y+.1))):(c.push(new z(r.x+.877*e.settings.dotSize*d*n,r.y+.877*e.settings.dotSize*l*h)),c.push(new z(r.x+.877*e.settings.boxSize*d*n,r.y+e.settings.boxSize*p*l*h)),c.push(new z(r.x+(e.settings.boxSize+e.settings.boxSize*p*d)*n,r.y+e.settings.boxSize*p*l*h)),c.push(new z(r.x+(e.settings.boxSize+e.settings.boxSize*p*d)*n,a.y-e.settings.boxSize*u*l)),c.push(new z(a.x,a.y-e.settings.boxSize*u*l)),c.push(new z(a.x,a.y-e.settings.dotSize*l)));let g=[["M",c[0].x,c[0].y],...c.map(e=>["L",e.x,e.y])].map(e=>e.join(" ")).join(" "),x=m(e.authorFrom.name);return(0,o.jsx)("path",{d:function(e,t,i){function o(e,t,i){var o=t.x-e.x,n=t.y-e.y;return s(e,t,Math.min(1,i/Math.sqrt(o*o+n*n)))}function s(e,t,i){return{x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i}}function n(e,t){e.length>2&&(e[e.length-2]=t.x,e[e.length-1]=t.y)}function r(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}var a=e.split(/[,\s]/).reduce(function(e,t){var i=t.match("([a-zA-Z])(.+)");return i?(e.push(i[1]),e.push(i[2])):e.push(t),e},[]).reduce(function(e,t){return parseFloat(t)==t&&e.length?e[e.length-1].push(t):e.push([t]),e},[]),l=[];if(a.length>1){var h=r(a[0]),d=null;"Z"==a[a.length-1][0]&&a[0].length>2&&(d=["L",h.x,h.y],a[a.length-1]=d),l.push(a[0]);for(var p=1;p<a.length;p++){var u=l[l.length-1],c=a[p],g=c==d?a[1]:a[p+1];if(g&&u&&u.length>2&&"L"==c[0]&&g.length>2&&"L"==g[0]){var x,y,w=r(u),b=r(c),f=r(g);i?(x=s(b,u.origPoint||w,5),y=s(b,g.origPoint||f,5)):(x=o(b,w,t),y=o(b,f,t)),n(c,x),c.origPoint=b,l.push(c);var m=s(x,b,.5),S=s(b,y,.5),v=["C",m.x,m.y,S.x,S.y,y.x,y.y];v.origPoint=b,l.push(v)}else l.push(c)}if(d){var z=r(l[l.length-1]);l.push(["Z"]),n(l[0],z)}}else l=a;return l.reduce(function(e,t){return e+t.join(" ")+" "},"")}(g,5,!1),stroke:x,strokeWidth:"2",fill:"none",className:"opacity-70 "+(e.isHighlighted?"animated-dash":"")})}},O=e=>M.map((t,i)=>{var s,n,r,a;if(t.from&&t.to&&e.isVisibleRange(Math.min(null==(s=t.from)?void 0:s.publicationDate,null==(n=t.to)?void 0:n.publicationDate),Math.max(null==(r=t.from)?void 0:r.publicationDate,null==(a=t.to)?void 0:a.publicationDate))){let s=b(t.from),n=b(t.to);if(s&&n)return(0,o.jsx)(D,{publicationReference:t,settings:e.publicationReferenceSettings,authorFrom:s,authorTo:n,positionStart:e.positionByYear(t.from.publicationDate),positionEnd:e.positionByYear(t.to.publicationDate),rowPositionFrom:e.rowPosition(s.rowNumber),rowPositionTo:e.rowPosition(n.rowNumber),isHighlighted:e.highlightedAuthor==s.id||e.highlightedAuthor==n.id||e.highlightedPublication==t.from.id||e.highlightedPublication==t.to.id},"pubref"+t.id+i)}}),N=e=>{let t=(0,s.useId)();return(0,o.jsxs)("div",{className:e.disabled?"neumorphism-toggle switchDisabled":"neumorphism-toggle",children:[(0,o.jsx)("input",{type:"checkbox",id:t,checked:e.state,onChange:t=>{e.disabled||e.useState(t.target.checked)}}),(0,o.jsxs)("label",{htmlFor:t,children:[(0,o.jsx)("div",{className:"switch",children:(0,o.jsx)("div",{className:"dot"})}),(0,o.jsx)("span",{children:e.label})]}),(0,o.jsx)("span",{children:e.offMsg})]})},Y=()=>{let e="undefined"!=typeof window,t=()=>({x:e?window.innerWidth:0,y:e?window.innerHeight:0}),[i,n]=s.useState(t());s.useEffect(()=>{if(e){function i(){n(t())}return window.addEventListener("resize",i),window.addEventListener("orientationchange",i),()=>window.removeEventListener("resize",i)}},[e]);let[r,l]=s.useState(!0),[d,p]=s.useState(!0),[u,c]=s.useState(!0),[g,x]=s.useState(22),[y,w]=s.useState(0),[b,f]=s.useState({isDragged:!1,startViewPosition:{x:0,y:0},startDragPosition:{x:0,y:0}}),[m,S]=s.useState("0"),[j,k]=s.useState("0"),[M,D]=s.useState({x:1809,y:0}),[Y,A]=s.useState({from:-1200,to:2025,stepSize:10}),R=[...Array(Math.ceil((Y.to-Y.from)/Y.stepSize))].map((e,t)=>Y.from+t*Y.stepSize),B=e=>(e-M.x)*g,E=e=>B(e)+165>0&&B(e)-165<i.x,L=(e,t)=>B(t)+165>0&&B(e)-165<i.x,H=e=>165*e+M.y,W=(e,t,i)=>{0==e&&f({isDragged:!0,startViewPosition:M,startDragPosition:{x:t,y:i}})},C=()=>f(e=>({...e,isDragged:!1})),V=(e,t)=>{b.isDragged&&D({x:Math.min(Math.max(b.startViewPosition.x-(e-b.startDragPosition.x)/g,Y.from-100),Y.to+100),y:b.startViewPosition.y+(t-b.startDragPosition.y)})},F=(e,t,i,o)=>Math.sqrt(Math.pow(e-i,2)+Math.pow(t-o,2));return(0,o.jsxs)("div",{style:{backgroundColor:"#f3f3f3",width:i.x,height:i.y,overflow:"hidden"},onMouseDown:e=>W(e.button,e.pageX,e.pageY),onTouchStart:e=>(e=>{switch(e.length){case 1:W(0,e[0].pageX,e[0].pageY);break;case 2:W(0,e[0].pageX,e[0].pageY),w(F(e[0].pageX,e[0].pageY,e[1].pageX,e[1].pageY))}})(e.touches),onMouseUp:e=>C(),onTouchEnd:e=>C(),onMouseMove:e=>V(e.pageX,e.pageY),onTouchMove:e=>(e=>{switch(e.length){case 1:V(e[0].pageX,e[0].pageY);break;case 2:let t=F(e[0].pageX,e[0].pageY,e[1].pageX,e[1].pageY);x(g-(y-t)/100),w(t),g<=10?A(e=>({...e,stepSize:100})):g<=20?A(e=>({...e,stepSize:10})):A(e=>({...e,stepSize:5})),C()}})(e.touches),onWheel:e=>{var t;11>=Math.max(1,g-(t=e.deltaY)/100)?(A(e=>({...e,stepSize:100})),x(Math.max(1,g-t/100))):g-t/200<=22?(A(e=>({...e,stepSize:10})),x(g-t/200)):(A(e=>({...e,stepSize:5})),x(g-t/300)),D({x:M.x-t/100,y:M.y})},children:[(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${i.x} ${i.y}`,preserveAspectRatio:"xMidYMid meet",style:{width:i.x,height:i.y},children:[(0,o.jsx)(a,{padSize:new z(i.x,i.y),isVisible:E,positionByYear:B,stateResetHandler:()=>{k("0"),S("0")},yearsOnScale:R}),r&&(0,o.jsx)(P,{isVisibleRange:L,personNodesSettings:{boxSize:50},positionByYear:B,rowPosition:H,updateHighlightedAuthor:S}),u&&d&&(0,o.jsx)(O,{highlightedAuthor:m,highlightedPublication:j,isVisibleRange:L,positionByYear:B,publicationReferenceSettings:{dotSize:15,boxSize:50},rowPosition:H}),d&&(0,o.jsx)(v,{isVisible:E,positionByYear:B,publicationNodeSettings:{dotSize:15,boxSize:50,maxLettersColumns:25,maxLettersRows:3},rowPosition:H,updateHighlightedPublication:k})]}),(0,o.jsx)(h,{padSize:new z(i.x,i.y),isVisible:E,positionByYear:B,yearLabelWidth:100,yearsOnScale:R}),(0,o.jsxs)("div",{className:"fixed top-0 right-0 w-3xs rounded-lg p-4 grid grid-cols-1 grid-rows-4 gap-4",children:[(0,o.jsx)(N,{label:"Autorzy",state:r,useState:l,offMsg:""}),(0,o.jsx)(N,{label:"Publikacje",state:d,useState:p,offMsg:""}),(0,o.jsx)(N,{label:"Odniesienia",state:u,useState:c,offMsg:"",disabled:!d})]})]})},A=document.getElementById("root");A&&n.createRoot(A).render((0,o.jsx)(s.StrictMode,{children:(0,o.jsx)(()=>(0,o.jsx)(Y,{}),{})}))}},t={};function i(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,i),n.exports}i.m=e,i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];i.O=(t,o,s,n)=>{if(o){n=n||0;for(var r=e.length;r>0&&e[r-1][2]>n;r--)e[r]=e[r-1];e[r]=[o,s,n];return}for(var a=1/0,r=0;r<e.length;r++){for(var[o,s,n]=e[r],l=!0,h=0;h<o.length;h++)(!1&n||a>=n)&&Object.keys(i.O).every(e=>i.O[e](o[h]))?o.splice(h--,1):(l=!1,n<a&&(a=n));if(l){e.splice(r--,1);var d=s();void 0!==d&&(t=d)}}return t}})(),(()=>{var e={410:0};i.O.j=t=>0===e[t];var t=(t,o)=>{var s,n,[r,a,l]=o,h=0;if(r.some(t=>0!==e[t])){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(l)var d=l(i)}for(t&&t(o);h<r.length;h++)n=r[h],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(d)},o=self.webpackChunkchronology_presenter=self.webpackChunkchronology_presenter||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=i.O(void 0,["783"],function(){return i(586)});o=i.O(o)})();